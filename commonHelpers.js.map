{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/onFormSubmit.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('#user-input'),\n  button: document.querySelector('.search-button'),\n  gallery: document.querySelector('.gallery'),\n  loadMore: document.querySelector('.load-button'),\n  loader: document.querySelector('#loader'),\n};\n","import { refs } from './refs';\nimport axios from 'axios';\n\nexport async function pixabayApi(userText, page) {\n  refs.loader.classList.add('loader');\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  const API_KEY = '42305784-5d55228baaa9a6392a5b2668b';\n  axios.defaults.params = {\n    key: API_KEY,\n    q: userText,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n  try {\n    const { data } = await axios.get();\n    refs.loader.classList.remove('loader');\n    return data;\n  } catch (error) {\n    iziToast.error({\n      position: 'topLeft',\n      message: 'Sorry, there is some problem. Please try again later.',\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { refs } from './refs';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { pixabayApi } from './pixabay-api';\n\nlet gallery = new SimpleLightbox('.gallery a', { captions: false });\n\nexport function checkFunction(userData) {\n  if (userData.hits.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topLeft',\n    });\n  } else {\n    iziToast.success({\n      message: `A total of ${userData.totalHits} images were successfully found`,\n      position: 'topLeft',\n    });\n\n    if (userData.totalHits > 15) {\n      refs.loadMore.classList.remove('is-hidden');\n      let page = 2;\n      const totalPages = Math.ceil(userData.totalHits / 15);\n      refs.loadMore.addEventListener('click', async () => {\n        if (page > totalPages) {\n          refs.loadMore.classList.add('is-hidden');\n          return iziToast.error({\n            position: 'topLeft',\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n        }\n        try {\n          const results = await pixabayApi(refs.input.value.trim(), page);\n          renderFunction(results);\n          page += 1;\n        } catch (error) {\n          iziToast.error({\n            position: 'topLeft',\n            message: 'Sorry, there is some problem. Please try again later.',\n          });\n        }\n        const height =\n          refs.gallery.firstElementChild.getBoundingClientRect().height;\n\n        window.scrollBy({\n          behavior: 'smooth',\n          top: height * 2,\n        });\n      });\n    }\n    renderFunction(userData);\n  }\n}\n\nfunction renderFunction(userData) {\n  const markup = userData.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n          <ul>\n            <li>\n              <h3>Likes</h3>\n              <p>${likes}</p>\n            </li>\n            <li>\n              <h3>Vievs</h3>\n              <p>${views}</p>\n            </li>\n            <li>\n              <h3>Comments</h3>\n              <p>${comments}</p>\n            </li>\n            <li>\n              <h3>Downloads</h3>\n              <p>${downloads}</p>\n            </li>\n          </ul>\n        </a></li>`;\n      }\n    )\n    .join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n","import { refs } from \"./refs\";\nimport { pixabayApi } from \"./pixabay-api\";\nimport { checkFunction } from \"./render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport function onFormSubmit(event) {\n    event.preventDefault();\n    refs.loadMore.classList.add(\"is-hidden\");\n    refs.gallery.innerHTML = \"\";\n    const userText = refs.input.value.trim();\n    if (userText !== \"\") {\n        pixabayApi(userText,1).then(checkFunction);\n    } else {\n        iziToast.error({\n            message: \"Sorry, the search bar is empty. Please try again!\",\n            position: \"topLeft\",\n        });\n    };\n}","import { refs } from './js/refs';\nimport { onFormSubmit } from './js/onFormSubmit';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n"],"names":["refs","pixabayApi","userText","page","axios","API_KEY","data","gallery","SimpleLightbox","checkFunction","userData","iziToast","totalPages","results","renderFunction","height","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","onFormSubmit","event"],"mappings":"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"}